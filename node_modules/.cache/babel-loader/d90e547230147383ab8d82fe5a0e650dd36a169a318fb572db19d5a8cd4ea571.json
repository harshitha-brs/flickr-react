{"ast":null,"code":"import _regeneratorRuntime from\"/home/user/Downloads/flickr/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/user/Downloads/flickr/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/user/Downloads/flickr/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Author:    Build Rise Shine with Nyros (BRS)\n// Created:   11.05.2022\n// Library / Component: Home Page\n// Description: Main page  for the app\n// (c) Copyright by BRS Studio | Build Rise Shine.\nimport{useState}from\"react\";import{HttpGet}from\"../core/store/httpHelper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),imageList=_useState2[0],setImageList=_useState2[1];var getImageList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var searchQuery,_conversionRates$phot,queryParams,conversionRates;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;searchQuery=event.target.imgSearch.value;if(!searchQuery){_context.next=9;break;}queryParams={tags:searchQuery};_context.next=7;return HttpGet(queryParams);case 7:conversionRates=_context.sent;setImageList(conversionRates===null||conversionRates===void 0?void 0:(_conversionRates$phot=conversionRates.photos)===null||_conversionRates$phot===void 0?void 0:_conversionRates$phot.photo);case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function getImageList(_x){return _ref.apply(this,arguments);};}();var imgUrl=function imgUrl(imgData){return\"https://farm\"+(imgData===null||imgData===void 0?void 0:imgData.farm)+\".staticflickr.com/\"+(imgData===null||imgData===void 0?void 0:imgData.server)+\"/\"+(imgData===null||imgData===void 0?void 0:imgData.id)+\"_\"+(imgData===null||imgData===void 0?void 0:imgData.secret)+\"_q.jpg\";};var downloadImg=function downloadImg(link){var url=link;var fileName='image.jpg';var xhr=new XMLHttpRequest();xhr.open(\"GET\",url,true);xhr.responseType=\"blob\";xhr.onload=function(){var urlCreator=window.URL||window.webkitURL;var imageUrl=urlCreator.createObjectURL(this.response);var tag=document.createElement('a');tag.href=imageUrl;tag.download=fileName;document.body.appendChild(tag);tag.click();document.body.removeChild(tag);window.URL.revokeObjectURL(imageUrl);};xhr.send();};var ImgGallery=function ImgGallery(){return!!imageList.length&&imageList.map(function(imgData){return/*#__PURE__*/_jsx(\"div\",{className:\"col col-lg-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"boxShadowClass\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"img-block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row w-100 m-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col col-lg-12 text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:imgUrl(imgData),alt:\"\",className:\"zoom\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row w-100 m-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col col-lg-12 text-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"border-0 text-center bg-transparent\",download:\"image.jpg\",onClick:function onClick(){return downloadImg(imgUrl(imgData));},children:/*#__PURE__*/_jsx(\"span\",{className:\"mdi mdi-arrow-down-bold-circle-outline\",id:\"mdi\"})})})})]})})},imgData.id);});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row w-100 m-0 p-2 srchblk\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:getImageList,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row w-100 m-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col col-lg-10 ps-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text rounded-0 rounded-start\",id:\"img-search\",children:\"#\"})}),/*#__PURE__*/_jsx(\"input\",{name:\"imgSearch\",type:\"text\",className:\"form-control\",placeholder:\"Search for images\",\"aria-label\":\"Search for images\",\"aria-describedby\":\"img-search\",autoFocus:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col col-lg-2 pe-0\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning w-100\",type:\"submit\",children:\"Go\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(ImgGallery,{})})]})})});};","map":{"version":3,"names":["useState","HttpGet","Home","imageList","setImageList","getImageList","event","preventDefault","searchQuery","target","imgSearch","value","queryParams","tags","conversionRates","photos","photo","console","log","imgUrl","imgData","farm","server","id","secret","downloadImg","link","url","fileName","xhr","XMLHttpRequest","open","responseType","onload","urlCreator","window","URL","webkitURL","imageUrl","createObjectURL","response","tag","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","send","ImgGallery","length","map"],"sources":["/home/user/Downloads/flickr/src/modules/Home.js"],"sourcesContent":["// Author:    Build Rise Shine with Nyros (BRS)\n// Created:   11.05.2022\n// Library / Component: Home Page\n// Description: Main page  for the app\n// (c) Copyright by BRS Studio | Build Rise Shine.\n\nimport { useState } from \"react\";\nimport { HttpGet } from \"../core/store/httpHelper\";\n\nexport const Home = () => {\n  const [imageList, setImageList] = useState([]);\n\n  const getImageList = async (event) => {\n    event.preventDefault();\n    try {\n      let searchQuery = event.target.imgSearch.value;\n      if(searchQuery) {\n        let queryParams = {\n          tags: searchQuery\n        }\n        let conversionRates = await HttpGet(queryParams);\n        setImageList(conversionRates?.photos?.photo);\n      }\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  const imgUrl = (imgData) => {\n    return \"https://farm\" + imgData?.farm + \".staticflickr.com/\" + imgData?.server + \"/\" + imgData?.id + \"_\" + imgData?.secret + \"_q.jpg\";\n  }\n\n  const downloadImg = (link) => {\n    var url = link;\n    var fileName = 'image.jpg';\n    var xhr = new XMLHttpRequest();\n    xhr.open(\"GET\", url, true);\n    xhr.responseType = \"blob\";\n    xhr.onload = function() {\n      var urlCreator = window.URL || window.webkitURL;\n      var imageUrl = urlCreator.createObjectURL(this.response);\n      var tag = document.createElement('a');\n      tag.href = imageUrl;\n      tag.download = fileName;\n      document.body.appendChild(tag);\n      tag.click();\n      document.body.removeChild(tag);\n      window.URL.revokeObjectURL(imageUrl)\n    }\n    xhr.send();\n  }\n\n  const ImgGallery = () => {\n    return (\n      !!imageList.length && imageList.map((imgData) => {\n        return (\n          <div key={imgData.id} className=\"col col-lg-3\">\n            <div className=\"boxShadowClass\">\n              <div className=\"img-block\">\n                <div className=\"row w-100 m-0\">\n                  <div className=\"col col-lg-12 text-center\">\n                    <img src={imgUrl(imgData)} alt=\"\" className=\"zoom\"/>\n                  </div>\n                </div>\n                <div className=\"row w-100 m-0\">\n                  <div className=\"col col-lg-12 text-end\">\n                    <button className=\"border-0 text-center bg-transparent\" download=\"image.jpg\" onClick={() => downloadImg(imgUrl(imgData))}>\n                      <span className=\"mdi mdi-arrow-down-bold-circle-outline\" id=\"mdi\"></span>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )\n      })\n    )\n  }\n\n  return (\n    <>\n    <div className=\"row w-100 m-0 p-2 srchblk\">\n      <form onSubmit={getImageList}>\n        <div className=\"row w-100 m-0\">\n          <div className=\"col col-lg-10 ps-0\">\n            <div className=\"input-group\">\n              <div className=\"input-group-prepend\">\n                <span className=\"input-group-text rounded-0 rounded-start\" id=\"img-search\">#</span>\n              </div>\n              <input name=\"imgSearch\" type=\"text\" className=\"form-control\" placeholder=\"Search for images\" aria-label=\"Search for images\" aria-describedby=\"img-search\" autoFocus />\n            </div>\n          </div>\n          <div className=\"col col-lg-2 pe-0\">\n            <button className=\"btn btn-warning w-100\" type=\"submit\">Go</button>\n          </div>\n        </div>\n        <div className=\"row\">\n          <ImgGallery />\n        </div>\n      </form>\n        </div>\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}